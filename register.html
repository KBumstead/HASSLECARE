<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">

  <title>create account</title>
  <link rel="stylesheet" href="/styles/register.css">

</head>

<body>

  <header>
    <div class="logo-box">
      <h2><a class="logo" id="logo-header">HassleCare</a></h2>
    </div>
    <div class="searchBar">
      <input type="search_bar" placeholder="find services">
    </div>

    <nav class="navbar">
      <button class="login-header" id="login-header">
        Login
      </button>
      <button class="register-header" id="register-header">
        Register
      </button>
      <button class="login-header" id="welcome-header" style="display: none">
        Hi!
      </button>
      <button class="register-header" id="account-header" style="display: none">
        Account
      </button>
    </nav>
  </header>

  <div class="wrapper">
    <div class="login-box form">
      <h2>Create a new account</h2>
      <form action="#">
        <div class="input-box">
          <p>Username</p>
          <div class="input-bar">
            <input type="username" id="username" required>
          </div>
        </div>
        <div class="input-box">
          <p>Email</p>
          <div class="input-bar">
            <input type="email" id="email" required>
          </div>
        </div>
        <div class="input-box">
          <p>Password</p>
          <div class="input-bar">
            <input type="password" id="password" required>
          </div>
        </div>
        <div class="accept-terms">
          <label><input type="checkbox"> I accept the terms and conditions</label>
        </div>

        <button type="submit" id="create-btn">
          Create
        </button>

      </form>
    </div>
  </div>

  <footer>
    <p>Copyright HassleCare 2023</p>
  </footer>

  <script src="/scripts/buttonFunction.js"></script>
  <script src="/scripts/common.js"></script>
  <script>
    document.getElementById("create-btn").addEventListener("click", function () {
      event.preventDefault();

      // Get the input values
      const username = document.getElementById("username").value;
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;

      // Create the payload
      const payload = {
        username: username,
        email: email,
        password: password,
      };

      // Send a fetch request to your desired URL
      fetch("https://alert-tourmaline-pantydraco.glitch.me/accounts", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(payload),
      })
        .then((response) => {
          if (response.ok) {
            // Registration was successful, redirect to the login page
            window.location.href = "/login";
          } else {
            // Registration failed, handle the error here
            throw new Error("Registration failed");
          }
        })
        .catch((error) => {
          // Handle any errors
          console.error("Error:", error);
        });
    });
  </script>
</body>

</html>